<!doctype html><html lang=en><head><title>Mu4e Tags to Address :: Alex Day</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="I use emacs for email and org capture to keep track of my open loops. Recently I have been trying to combine the two and capture tasks that link to emails. I wanted to tag my capture items based on the inbox they fall into, :@home: for my personal and :@school for my school emails. I cobbled together this function based upon different stackexchange posts and figured I would share it here for anyone who wanted to do the same."><meta name=keywords content="Coding,PhD,Clemson"><meta name=robots content="noodp"><link rel=canonical href=/posts/mu4e-tags-to-address/><link rel=stylesheet href=/assets/style.css><link rel=stylesheet href=/assets/green.css><link rel=stylesheet href=/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:creator content><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Mu4e Tags to Address :: Alex Day"><meta property="og:description" content="Automatically tag mu4e emails with org-capture"><meta property="og:url" content="/posts/mu4e-tags-to-address/"><meta property="og:site_name" content="Mu4e Tags to Address"><meta property="og:image" content="/favicon.ico"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2020-06-21 23:35:28 -0400 -0400"><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link rel=manifest href=/manifest.json><script type=text/javascript>if('serviceWorker'in navigator){navigator.serviceWorker.register('/sw.js',{scope:'/'}).then(function(registration){console.log('Service Worker Registered');});navigator.serviceWorker.ready.then(function(registration){console.log('Service Worker Ready');});}</script></head><body><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Alex Day</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about>About</a></li><li><a href=/posts>Posts</a></li><li><a href=/projects>Projects</a></li><li><a href=/papers>Papers</a></li><li><a href=/talks>Talks</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about>About</a></li><li><a href=/posts>Posts</a></li><li><a href=/projects>Projects</a></li><li><a href=/papers>Papers</a></li><li><a href=/talks>Talks</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=/posts/mu4e-tags-to-address/>Mu4e Tags to Address</a></h1><div class=post-meta><span class=post-date>2020-06-21</span></div><span class=post-tags>#<a href=/tags/mu4e/>mu4e</a>&nbsp;
#<a href=/tags/emacs/>emacs</a>&nbsp;
#<a href=/tags/org_capture/>org_capture</a>&nbsp;</span><div class=post-content><div><p>I use <a href=/posts/emacs-for-email/>emacs for email</a> and <a href=https://orgmode.org/manual/Capture.html>org capture</a> to keep track of my open loops. Recently I have been trying to combine the two and capture tasks that link to emails. I wanted to <a href=https://orgmode.org/manual/Tags.html>tag</a> my capture items based on the inbox they fall into, <code>:@home:</code> for my personal and <code>:@school</code> for my school emails. I cobbled together this function based upon different stackexchange posts and figured I would share it here for anyone who wanted to do the same.</p><h2 id=headline-1>Code</h2><p>This function generates the tag based on the <code>:to</code> address of the stored email. If the email is my personal (alexday135@gmail) the tag is <code>:@home:</code> and any other email is tagged <code>:@school:</code>.</p><div class="src src-emacs-lisp"><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp>(defun create-mail-tag ()
  <span style=color:#e6db74>&#34;Create the tag for the todo&#34;</span>
  (let ((to (<span style=color:#a6e22e>plist-get</span> org-store-link-plist :to)))
    (if (<span style=color:#a6e22e>equal</span> to <span style=color:#e6db74>&#34;&#39;Alex Day&#39; &lt;alexday135@gmail.com&gt;&#34;</span>)
        <span style=color:#e6db74>&#34;:@home:&#34;</span>
        <span style=color:#e6db74>&#34;:@school:&#34;</span>)))</code></pre></div></div><p>This is the actual capture template. This just creates a new item in my inbox with a link to the email (<code>%a</code>), the tag (<code>%(create-mail-tag)</code>), and then the date the email was sent on the line below. No capture window pops up and it is immediately added to my inbox.</p><div class="src src-emacs-lisp"><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp>(setq org-capture-templates
    <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;e&#34;</span> <span style=color:#e6db74>&#34;Email&#34;</span> entry (file+headline <span style=color:#e6db74>&#34;~/Dropbox/gtd/inbox.org&#34;</span> <span style=color:#e6db74>&#34;Inbox&#34;</span>)
        <span style=color:#e6db74>&#34;* TODO [#A] Reply: %a %(create-mail-tag)\n%:date-timestamp&#34;</span>
        :immediate-finish <span style=color:#66d9ef>t</span>)))</code></pre></div></div></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button next"><a href=/posts/github-actions/><span class=button__text>GitHub Actions</span>
<span class=button__icon>→</span></a></span></div></div><script src=https://utteranc.es/client.js repo=AlexanderDavid/alexanderdavid.github.io issue-term=pathname theme=photon-dark crossorigin=anonymous async></script></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><span>© 2020 Alex Day</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=/assets/main.js></script><script src=/assets/prism.js></script></div></body></html>